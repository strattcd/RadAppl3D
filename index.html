<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home</title>
    <link rel="stylesheet" href="assets/stylesheets/main.css">
</head>
<body>
    <form id="addCube">
        <button class="button" type="button" onclick="addCube()">Add</button>
        X <input type="text" name="posX" />
        Y <input type="text" name="posY" />
        Z <input type="text" name="posZ" />
    </form>
    <!-- <form id="position" onchange="updateCube()">
        Number <input class="number" type="text" name ="number" />
        X <input type="text" name="posX" />
        Y <input type="text" name="posY" />
        Z <input type="text" name="posZ" />
    </form>     -->
    <div id="text"></div>
    <div id="container"></div>
    <script src="../js/three.js"></script>
    <script>
        //import * as THREE from "../js/three.module.js";
        //import {OrbitControls} from "../js/OrbitControls.js";

        function createScene(elementId){
            var renderer, scene, camera, distance, raycaster, projector;
            var container = document.getElementById(elementId);
            var distance = 400;   
            var counter = "0";
            init();
            createCube(0,0,0, counter);             
        }

        function init(){
            renderer = new THREE.WebGLRenderer();
            renderer.setSize( 500, 250 );
            renderer.setClearColor(0x888888, 1);
            container.appendChild( renderer.domElement );

            scene = new THREE.Scene();
            camera = new THREE.PerspectiveCamera( 75, 2, 0.1, 1000 );
            camera.position.z = 5;

            //LIGHTNING
            //first point light
            light = new THREE.PointLight(0xffffff, 1, 4000);
            light.position.set(50, 0, 0);
            //the second one
            light_two = new THREE.PointLight(0xffffff, 1, 4000);
            light_two.position.set(-100, 800, 800);
            //And another global lightning some sort of cripple GL
            lightAmbient = new THREE.AmbientLight(0x404040);
            scene.add(light, light_two, lightAmbient);
        }

        function addCube(counter){
            counter += 1;
            x=document.getElementById("addCube").posX.value
            y=document.getElementById("addCube").posY.value
            z=document.getElementById("addCube").posZ.value
            createCube(x,y,z, counter);
            return false;
        }


        function createCube(x, y, z, counter){
            var geometry = new THREE.BoxGeometry();
            var material = new THREE.MeshPhongMaterial( { color: 0x00ff00 } );
            var cube = new THREE.Mesh( geometry, material );
            cube.name = "cube"+counter;
            cube.position.x = x;
            cube.position.y = y;
            cube.position.z = z; 
            scene.add( cube );  
            renderer.render( scene, camera );                      
        }     

        function animate() {
            requestAnimationFrame( animate );         
            rotateCube();
        }

        function rotateCube(){    
            cube = scene.getObjectByName("cube");
            cube.rotation.x += 0.01;
            cube.rotation.y += 0.01;                    
        }


        function updateCube(){
            cube = scene.getObjectByName( "cube" );
            cube.position.x = document.getElementById("addCube").posX.value;
            cube.position.y = document.getElementById("addCube").posY.value;
            cube.position.z = document.getElementById("addCube").posZ.value;           
            renderer.render( scene, camera ); 
            print(counter);           
        }

    </script>
    <script>
        createScene("container");
            // document.getElementById("addCube").posX.value, 
            // document.getElementById("addCube").posY.value, 
            // document.getElementById("addCube").posZ.value);
    </script>    
</body>
</html>